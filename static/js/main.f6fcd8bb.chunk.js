(this["webpackJsonpreact_dynamic-list-of-posts"]=this["webpackJsonpreact_dynamic-list-of-posts"]||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var c=n(6),s=n.n(c),a=n(3),r=n(4),o=n(1),i=n.n(o),u=n(2),l=(n(13),n(14),"https://mate.academy/students-api");function p(e){return j.apply(this,arguments)}function j(){return(j=Object(a.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(l,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n.json());case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return d.apply(this,arguments)}function d(){return(d=Object(a.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("comments?postId=".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return f.apply(this,arguments)}function f(){return(f=Object(a.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t){e.next=5;break}return e.next=3,p("posts");case 3:return n=e.sent,e.abrupt("return",n);case 5:return e.next=7,p("/posts?userId=".concat(t));case 7:return n=e.sent,e.abrupt("return",n.json());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return O.apply(this,arguments)}function O(){return(O=Object(a.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("/posts/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(15);var x=n(0),v=function(e){var t=e.userId,n=e.selectPostId,c=e.post,s=Object(u.useState)([]),o=Object(r.a)(s,2),l=o[0],p=o[1];function j(){return(j=Object(a.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t);case 2:n=e.sent,p(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.useEffect)((function(){!function(){j.apply(this,arguments)}()}),[t]),Object(x.jsxs)("div",{className:"PostsList",children:[Object(x.jsx)("h2",{children:"Posts:"}),Object(x.jsx)("ul",{className:"PostsList__list",children:l.map((function(e){return Object(x.jsxs)("li",{className:"PostList__item",children:[Object(x.jsxs)("div",{children:[Object(x.jsx)("b",{children:"[User] #".concat(e.userId," ")}),e.title]}),Object(x.jsx)("button",{type:"button",className:"PostsList__button button",onClick:function(){c&&c===e.id?n(null):n(e.id)},children:c&&c===e.id?"close":"open"})]})}))})]})},_=n(7),N=n.n(_);function y(e,t,n,c){return w.apply(this,arguments)}function w(){return(w=Object(a.a)(i.a.mark((function e(t,n,c,s){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(l,"/comments"),{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify({postId:s,name:t,email:n,body:c})});case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(17);var k=function(e){var t=e.currentPostId,n=e.needToUpdate,c=e.setNeedToUpdate,s=Object(u.useState)(""),o=Object(r.a)(s,2),l=o[0],p=o[1],j=Object(u.useState)(""),b=Object(r.a)(j,2),d=b[0],m=b[1],f=Object(u.useState)(!0),h=Object(r.a)(f,2),O=h[0],v=h[1];function _(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}var w=Object(u.useState)(""),k=Object(r.a)(w,2),P=k[0],S=k[1];return Object(x.jsxs)("form",{className:"NewCommentForm",onSubmit:function(){var e=Object(a.a)(i.a.mark((function e(s){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.preventDefault(),_(d),!_(d)){e.next=8;break}return e.next=5,y(l,d,P,t);case 5:c(!n),e.next=9;break;case 8:v(!1);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),children:[Object(x.jsx)("div",{className:"form-field",children:Object(x.jsx)("input",{type:"text",name:"name",placeholder:"Your name",className:"NewCommentForm__input",required:!0,value:l,onChange:function(e){p(e.target.value)}})}),Object(x.jsx)("div",{className:"form-field",children:Object(x.jsx)("input",{type:"text",name:"email",placeholder:"Your email",className:N()({NewCommentForm__input:O},{"NewCommentForm__input-invalid":!O}),required:!0,value:d,onChange:function(e){m(e.target.value),v(!0)}})}),Object(x.jsx)("div",{className:"form-field",children:Object(x.jsx)("textarea",{name:"body",placeholder:"Type comment here",className:"NewCommentForm__input",required:!0,value:P,onChange:function(e){S(e.target.value)}})}),Object(x.jsx)("button",{type:"submit",className:"NewCommentForm__submit-button button",children:"Add a comment"})]})},P=(n(18),function(e){var t=e.post,n=Object(u.useState)([]),c=Object(r.a)(n,2),s=c[0],o=c[1],p=Object(u.useState)(),j=Object(r.a)(p,2),d=j[0],m=j[1],f=Object(u.useState)(!0),O=Object(r.a)(f,2),v=O[0],_=O[1],N=Object(u.useState)(!1),y=Object(r.a)(N,2),w=y[0],P=y[1];function S(){return(S=Object(a.a)(i.a.mark((function e(){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b(t);case 2:return n=e.sent,e.next=5,h(t);case 5:c=e.sent,m(c),o(n);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(u.useEffect)((function(){!function(){S.apply(this,arguments)}(),_(!0)}),[t,w]),Object(x.jsxs)("div",{className:"PostDetails",children:[Object(x.jsx)("h2",{children:"Post details:"}),t&&Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)("section",{className:"PostDetails__post",children:Object(x.jsx)("p",{children:null===d||void 0===d?void 0:d.title})}),Object(x.jsxs)("section",{className:"PostDetails__comments",children:[s.length>0&&Object(x.jsx)("button",{type:"button",className:"button",onClick:function(){_(!v)},children:v?"Hide comments":"Show comments"}),Object(x.jsx)("ul",{className:"PostDetails__list",children:t&&v&&s.map((function(e){return Object(x.jsxs)("li",{className:"PostDetails__list-item",children:[Object(x.jsx)("button",{type:"button",className:"PostDetails__remove-button button",onClick:Object(a.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n="comments/".concat(e.id),fetch("".concat(l,"/").concat(n),{method:"DELETE"});case 2:P(!w);case 3:case"end":return t.stop()}var n}),t)}))),children:"X"}),Object(x.jsx)("p",{children:e.body})]},e.id)}))})]}),Object(x.jsx)("section",{children:Object(x.jsx)("div",{className:"PostDetails__form-wrapper",children:Object(x.jsx)(k,{currentPostId:t,needToUpdate:w,setNeedToUpdate:P})})})]})]})}),S=function(){var e=Object(u.useState)(0),t=Object(r.a)(e,2),n=t[0],c=t[1],s=Object(u.useState)(null),o=Object(r.a)(s,2),l=o[0],j=o[1],b=Object(u.useState)([]),d=Object(r.a)(b,2),m=d[0],f=d[1];return Object(u.useEffect)((function(){var e=function(){var e=Object(a.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p("Users");case 2:t=e.sent,f(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)("header",{className:"App__header",children:Object(x.jsxs)("label",{children:["Select a user: \xa0",Object(x.jsxs)("select",{className:"App__user-selector",onChange:function(e){c(Number(e.target.value))},children:[Object(x.jsx)("option",{value:"0",children:"All users"}),m.map((function(e){return Object(x.jsx)("option",{value:e.id,children:e.name})}))]})]})}),Object(x.jsxs)("main",{className:"App__main",children:[Object(x.jsx)("div",{className:"App__sidebar",children:Object(x.jsx)(v,{userId:n,selectPostId:j,post:l})}),l&&Object(x.jsx)("div",{className:"App__content",children:Object(x.jsx)(P,{post:l})})]})]})};s.a.render(Object(x.jsx)(S,{}),document.getElementById("root"))}],[[19,1,2]]]);
//# sourceMappingURL=main.f6fcd8bb.chunk.js.map